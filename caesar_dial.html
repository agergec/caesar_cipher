<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sezar Ã‡arkÄ± - GÃ¶rsel KaydÄ±rma</title>
    <style>
        :root {
            --primary: #c0392b;
            --secondary: #2c3e50;
            --bg: #f3f4f6;
            --dial-size: 360px;
            --radius-plain: 152px;
            --radius-cipher: 124px;
            --focus-top-gap: 6px;     /* how much above outer ring */
            --focus-bottom-gap: 8px;  /* how much into inner ring */
            --cipher-font-size: 0.95rem;
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e0e7ff, #fdf2f8);
            color: #1f2937;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .app {
            background: white;
            width: 100%;
            max-width: 1100px;
            border-radius: 18px;
            padding: 24px;
            box-shadow: 0 20px 50px rgba(31, 41, 55, 0.2);
        }

        h1 {
            text-align: center;
            margin: 0 0 6px 0;
            color: var(--primary);
        }

        .language-switch {
            display: flex;
            justify-content: center;
            gap: 10px;
            align-items: center;
            margin-bottom: 12px;
            font-weight: 600;
            color: #2c3e50;
        }
        .language-switch select {
            padding: 6px 10px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            font-weight: 600;
            cursor: pointer;
        }

        .accordion {
            background: #f8f9fa;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 14px;
            box-shadow: 0 6px 14px rgba(0,0,0,0.04);
        }
        .accordion-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 14px;
            cursor: pointer;
            font-weight: 700;
            color: #2c3e50;
            background: linear-gradient(180deg, #ffffff, #f3f4f6);
        }
        .accordion-header span { pointer-events: none; }
        .accordion-arrow {
            transition: transform 0.2s ease;
        }
        .accordion-arrow.open { transform: rotate(180deg); }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 14px;
            color: #4b5563;
            line-height: 1.5;
        }
        .accordion-content.open {
            padding: 12px 14px 14px 14px;
        }
        .info-links {
            margin-top: 8px;
        }
        .info-links a {
            color: #1d9bf0;
            text-decoration: none;
            font-weight: 700;
        }
        .info-links a:hover { text-decoration: underline; }

        /* Mode switch */
        .mode-switch {
            display: flex;
            justify-content: center;
            gap: 14px;
            margin-bottom: 20px;
        }
        .mode-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            background: #f9fafb;
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s;
        }
        .mode-option:hover { background: #eef2ff; }
        .mode-option input { accent-color: var(--primary); transform: scale(1.1); }

        /* Key buttons */
        .keys {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            justify-content: center;
            margin-bottom: 14px;
        }
        .key {
            width: 36px;
            height: 42px;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            background: white;
            transition: all 0.18s ease;
            font-weight: 700;
        }
        .key small { font-size: 0.6rem; color: #9ca3af; }
        .key:hover { border-color: var(--primary); transform: translateY(-2px); }
        .key.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 8px 18px rgba(192, 57, 43, 0.35);
        }
        .key.active small { color: rgba(255,255,255,0.7); }

        /* Dial */
        .dial-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            align-items: center;
            margin-bottom: 22px;
        }
        .dial-wrapper {
            position: relative;
            width: var(--dial-size);
            height: var(--dial-size);
            margin: 0 auto;
        }
        /* Column highlight showing aligned letters under the top marker */
        .focus-bridge {
            position: absolute;
            top: calc(50% - var(--radius-plain) - var(--focus-top-gap));
            left: 51.4%;
            transform: translateX(-50%);
            width: 32px;
            height: calc(var(--radius-plain) - var(--radius-cipher) + (var(--cipher-font-size) * 2));
            border: 2px solid #1d9bf0;
            border-radius: 12px;
            background: rgba(29, 155, 240, 0.06);
            box-shadow: 0 0 0 5px rgba(29, 155, 240, 0.04);
            pointer-events: none;
            z-index: 3;
        }
        .dial-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            transform: translate(-50%, -50%);
        }
        .ring-letter {
            position: absolute;
            top: 50%;
            left: 50%;
            font-weight: 700;
            letter-spacing: 0.5px;
            color: #1f2937;
            transform-origin: 0 0;
            transform: rotate(var(--angle)) translate(var(--radius)) rotate(calc(-1 * var(--angle)));
            transition: transform 0.28s ease;
            font-size: 1.05rem;
            line-height: 1;
        }
        .cipher-letter {
            color: var(--primary);
            font-size: var(--cipher-font-size);
        }

        .dial-center {
            position: absolute;
            top: 50%;
            left: 51.4%;
            transform: translate(-50%, -50%);
            background: #fff;
            border: 2px solid #e5e7eb;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            padding: 14px 18px;
            border-radius: 14px;
            text-align: center;
            min-width: 140px;
        }
        .dial-center .title { font-size: 0.78rem; color: #6b7280; margin-bottom: 4px; }
        .dial-center .value { font-size: 1.35rem; font-weight: 800; color: var(--primary); }

        /* Slider + IO */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .slider-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            background: #f9fafb;
        }
        .slider-row label { font-weight: 700; color: #374151; min-width: 120px; }
        input[type="range"] { flex: 1; accent-color: var(--primary); cursor: pointer; }
        .slider-val { font-weight: 700; color: var(--primary); min-width: 120px; text-align: right; }

        .io-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 18px;
        }
        @media(max-width: 820px) { .io-grid { grid-template-columns: 1fr; } }
        .box { display: flex; flex-direction: column; }
        .box label { font-weight: 700; color: #111827; margin-bottom: 6px; }
        textarea {
            min-height: 120px;
            padding: 12px;
            border-radius: 10px;
            border: 2px solid #e5e7eb;
            font-size: 1rem;
            resize: vertical;
        }
        textarea:focus { outline: none; border-color: var(--primary); }
        .output { background: #f8fafc; color: #111827; }
    </style>
</head>
<body>
<div class="app">
    <h1 id="title">TÃ¼rkÃ§e Sezar Ã‡arkÄ±</h1>

    <div class="language-switch">
        <span id="languageLabel">Dil / Language:</span>
        <select id="languageSelect" onchange="setLanguage(this.value)">
            <option value="tr">TÃ¼rkÃ§e</option>
            <option value="en">English</option>
            <option value="fr">FranÃ§ais</option>
        </select>
    </div>

    <div class="accordion">
        <div class="accordion-header" onclick="toggleInfo()">
            <span id="infoTitle">Sezar Åžifrelemesi Nedir?</span>
            <span id="infoArrow" class="accordion-arrow">â–¼</span>
        </div>
        <div id="infoContent" class="accordion-content">
            <div id="infoBody">Sezar ÅŸifrelemesi, alfabenin her harfini sabit bir sayÄ± kadar kaydÄ±rarak metni gizler. Anahtar, kaÃ§ harf kaydÄ±rÄ±lacaÄŸÄ±nÄ± belirler; Ã§Ã¶zmek iÃ§in aynÄ± miktarda geri kaydÄ±rÄ±lÄ±r.</div>
            <div class="info-links"><a id="infoLink" href="https://tr.wikipedia.org/wiki/Sezar_%C5%9Fifresi" target="_blank" rel="noopener">Wikipedia</a></div>
        </div>
    </div>

    <div class="mode-switch">
        <label class="mode-option">
            <input type="radio" name="mode" value="encrypt" checked onchange="onModeChange()">
            <span id="labelEncrypt">ðŸ”’ Åžifrele</span>
        </label>
        <label class="mode-option">
            <input type="radio" name="mode" value="decrypt" onchange="onModeChange()">
            <span id="labelDecrypt">ðŸ”“ Ã‡Ã¶z</span>
        </label>
    </div>

    <div class="keys" id="keyStrip"></div>

    <div class="dial-section">
        <div class="dial-wrapper">
            <div class="focus-bridge"></div>
            <div class="dial-ring" id="plainRing"></div>
            <div class="dial-ring" id="cipherRing"></div>
            <div class="dial-center">
                <div class="title" id="centerTitle">KaydÄ±rma</div>
                <div class="value" id="centerValue">A (0)</div>
            </div>
        </div>
        <div class="controls">
            <div class="slider-row">
                <label for="shiftSlider" id="sliderLabel">Ã‡arkÄ± kaydÄ±r:</label>
                <input type="range" id="shiftSlider" min="0" max="28" value="0" oninput="setKey(parseInt(this.value), 'slider')">
                <div class="slider-val" id="sliderVal">A (0)</div>
            </div>
            <div class="io-grid">
                <div class="box">
                    <label id="inputLabel">Girdi:</label>
                    <textarea id="inputTxt" placeholder="Metni yazÄ±n..." oninput="updateAll()"></textarea>
                </div>
                <div class="box">
                    <label id="outputLabel">SonuÃ§:</label>
                    <textarea id="outputTxt" class="output" readonly></textarea>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const defaultUpper = (ch) => ch.toUpperCase();
    const defaultLower = (ch) => ch.toLowerCase();
    const toUpperTr = (ch) => {
        if (ch === 'i') return 'Ä°';
        if (ch === 'Ä±') return 'I';
        return ch.toUpperCase();
    };
    const toLowerTr = (ch) => {
        if (ch === 'Ä°') return 'i';
        if (ch === 'I') return 'Ä±';
        return ch.toLowerCase();
    };

    const languages = {
        tr: {
            alphabet: ['A','B','C','Ã‡','D','E','F','G','Äž','H','I','Ä°','J','K','L','M','N','O','Ã–','P','R','S','Åž','T','U','Ãœ','V','Y','Z'],
            sample: 'Merhaba DÃ¼nya',
            labels: {
                title: 'ðŸ‡¹ðŸ‡· Sezar Åžifreleme',
                language: 'Dil / Language:',
                encrypt: 'ðŸ”’ Åžifrele',
                decrypt: 'ðŸ”“ Ã‡Ã¶z',
                slider: 'Ã‡arkÄ± kaydÄ±r:',
                center: 'KaydÄ±rma',
                input: 'Girdi:',
                output: 'SonuÃ§:',
                infoTitle: 'Sezar Åžifrelemesi Nedir?',
                infoBody: 'Sezar ÅŸifrelemesi, alfabenin her harfini sabit bir sayÄ± kadar kaydÄ±rarak metni gizler. Anahtar, kaÃ§ harf kaydÄ±rÄ±lacaÄŸÄ±nÄ± belirler; Ã§Ã¶zmek iÃ§in aynÄ± miktarda geri kaydÄ±rÄ±lÄ±r.',
                infoLinkText: 'Wikipedia\'da oku',
                infoLinkUrl: 'https://tr.wikipedia.org/wiki/Sezar_%C5%9Fifrelemesi'
            },
            toUpper: toUpperTr,
            toLower: toLowerTr
        },
        en: {
            alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''),
            sample: 'Hello World',
            labels: {
                title: 'ðŸ‡¬ðŸ‡§ Caesar Cipher',
                language: 'Language:',
                encrypt: 'ðŸ”’ Encrypt',
                decrypt: 'ðŸ”“ Decrypt',
                slider: 'Slide the dial:',
                center: 'Shift',
                input: 'Input:',
                output: 'Result:',
                infoTitle: 'What is the Caesar cipher?',
                infoBody: 'The Caesar cipher shifts every letter in the alphabet by a fixed amount. The key is the number of steps to shift; to decrypt, you shift back by the same amount.',
                infoLinkText: 'Read on Wikipedia',
                infoLinkUrl: 'https://en.wikipedia.org/wiki/Caesar_cipher'
            },
            toUpper: defaultUpper,
            toLower: defaultLower
        },
        fr: {
            alphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split(''),
            sample: 'Bonjour le monde',
            labels: {
                title: 'ðŸ‡«ðŸ‡· Chiffre de CÃ©sar',
                language: 'Langue :',
                encrypt: 'ðŸ”’ Chiffrer',
                decrypt: 'ðŸ”“ DÃ©chiffrer',
                slider: 'Faire tourner le disque :',
                center: 'DÃ©calage',
                input: 'Texte :',
                output: 'RÃ©sultat :',
                infoTitle: 'Quâ€™est-ce que le chiffre de CÃ©sar ?',
                infoBody: 'Le chiffre de CÃ©sar dÃ©cale chaque lettre de lâ€™alphabet dâ€™un nombre fixe. La clÃ© est ce nombre de dÃ©calage ; pour dÃ©chiffrer, on dÃ©cale en sens inverse du mÃªme montant.',
                infoLinkText: 'Lire sur WikipÃ©dia',
                infoLinkUrl: 'https://fr.wikipedia.org/wiki/Chiffrement_par_d%C3%A9calage'
            },
            toUpper: defaultUpper,
            toLower: defaultLower
        }
    };

    let currentLang = 'tr';
    let alphabet = languages[currentLang].alphabet;
    let activeToUpper = languages[currentLang].toUpper;
    let activeToLower = languages[currentLang].toLower;
    let len = alphabet.length;
    let step = 360 / len;
    const radiusPlain = 152;
    const radiusCipher = 124;

    let selectedIndex = 0;
    let lastMode = 'encrypt';
    let cipherLetters = [];
    let infoOpen = false;

    function applyLabels() {
        const t = languages[currentLang].labels;
        document.getElementById('title').textContent = t.title;
        document.getElementById('languageLabel').textContent = t.language;
        document.getElementById('labelEncrypt').textContent = t.encrypt;
        document.getElementById('labelDecrypt').textContent = t.decrypt;
        document.getElementById('sliderLabel').textContent = t.slider;
        document.getElementById('centerTitle').textContent = t.center;
        document.getElementById('inputLabel').textContent = t.input;
        document.getElementById('outputLabel').textContent = t.output;
        document.getElementById('infoTitle').textContent = t.infoTitle;
        document.getElementById('infoBody').textContent = t.infoBody;
        document.getElementById('infoLink').textContent = t.infoLinkText;
        document.getElementById('infoLink').href = t.infoLinkUrl;
    }

    function ensureSampleIfEmpty(prevSample = '') {
        const input = document.getElementById('inputTxt');
        const trimmed = input.value.trim();
        if (!trimmed || trimmed === prevSample) {
            input.value = languages[currentLang].sample;
        }
    }

    function toggleInfo(forceState) {
        if (typeof forceState === 'boolean') {
            infoOpen = forceState;
        } else {
            infoOpen = !infoOpen;
        }
        const content = document.getElementById('infoContent');
        const arrow = document.getElementById('infoArrow');
        if (infoOpen) {
            content.classList.add('open');
            content.style.maxHeight = content.scrollHeight + 'px';
            arrow.classList.add('open');
        } else {
            content.classList.remove('open');
            content.style.maxHeight = '0px';
            arrow.classList.remove('open');
        }
    }

    function buildKeys() {
        const wrap = document.getElementById('keyStrip');
        wrap.innerHTML = '';
        alphabet.forEach((ch, idx) => {
            const btn = document.createElement('div');
            btn.className = 'key' + (idx === selectedIndex ? ' active' : '');
            btn.innerHTML = `<span>${ch}</span><small>${idx}</small>`;
            btn.onclick = () => setKey(idx, 'key');
            wrap.appendChild(btn);
        });
    }

    function buildRings() {
        cipherLetters = [];
        const plainRing = document.getElementById('plainRing');
        const cipherRing = document.getElementById('cipherRing');
        plainRing.innerHTML = '';
        cipherRing.innerHTML = '';
        alphabet.forEach((ch, idx) => {
            const angle = idx * step - 90;
            const p = document.createElement('div');
            p.className = 'ring-letter';
            p.style.setProperty('--angle', `${angle}deg`);
            p.style.setProperty('--radius', `${radiusPlain}px`);
            p.textContent = ch;
            plainRing.appendChild(p);

            const c = document.createElement('div');
            c.className = 'ring-letter cipher-letter';
            c.style.setProperty('--angle', `${angle}deg`);
            c.style.setProperty('--radius', `${radiusCipher}px`);
            c.textContent = ch;
            cipherRing.appendChild(c);
            cipherLetters.push(c);
        });
    }

    function setLanguage(lang) {
        const prevSample = languages[currentLang].sample;
        currentLang = lang;
        alphabet = languages[lang].alphabet;
        activeToUpper = languages[lang].toUpper;
        activeToLower = languages[lang].toLower;
        len = alphabet.length;
        step = 360 / len;
        if (selectedIndex >= len) {
            selectedIndex = selectedIndex % len;
        }
        document.getElementById('languageSelect').value = lang;
        applyLabels();
        buildKeys();
        buildRings();
        ensureSampleIfEmpty(prevSample);
        document.getElementById('shiftSlider').max = len - 1;
        document.getElementById('shiftSlider').value = selectedIndex;
        toggleInfo(false);
        updateAll();
    }

    function onModeChange() {
        const mode = document.querySelector('input[name="mode"]:checked').value;
        if (mode !== lastMode && mode === 'decrypt') {
            const input = document.getElementById('inputTxt');
            const output = document.getElementById('outputTxt');
            [input.value, output.value] = [output.value, input.value];
        }
        lastMode = mode;
        updateAll();
    }

    function setKey(index) {
        selectedIndex = index;
        document.getElementById('shiftSlider').value = index;
        document.querySelectorAll('.key').forEach((k, i) => {
            k.classList.toggle('active', i === index);
        });
        updateAll();
    }

    function effectiveShift() {
        const mode = document.querySelector('input[name="mode"]:checked').value;
        if (mode === 'decrypt') {
            return (len - selectedIndex) % len;
        }
        return selectedIndex;
    }

    function updateDial(visualShift) {
        const sliderVal = document.getElementById('sliderVal');
        const centerVal = document.getElementById('centerValue');
        sliderVal.textContent = `${alphabet[selectedIndex]} (${selectedIndex})`;
        centerVal.textContent = `${alphabet[selectedIndex]} (${selectedIndex})`;

        cipherLetters.forEach((el, idx) => {
            const angle = ((idx - visualShift) * step) - 90;
            el.style.setProperty('--angle', `${angle}deg`);
        });
    }

    function updateAll() {
        const shiftForText = effectiveShift();
        const visualShift = selectedIndex; // keep dial aligned to chosen key

        updateDial(visualShift);

        const input = document.getElementById('inputTxt').value;
        let result = "";
        for (let char of input) {
            const upper = activeToUpper(char);
            const idx = alphabet.indexOf(upper);
            if (idx !== -1) {
                const newIdx = (idx + shiftForText) % len;
                const mappedUpper = alphabet[newIdx];
                const isLower = char === activeToLower(char) && char !== activeToUpper(char);
                result += isLower ? activeToLower(mappedUpper) : mappedUpper;
            } else {
                result += char;
            }
        }
        document.getElementById('outputTxt').value = result;
    }

    function init() {
        document.getElementById('languageSelect').value = currentLang;
        applyLabels();
        buildKeys();
        buildRings();
        document.getElementById('shiftSlider').max = len - 1;
        ensureSampleIfEmpty();
        updateAll();
    }

    init();
</script>
</body>
</html>
